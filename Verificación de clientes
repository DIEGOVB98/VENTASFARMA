import streamlit as st
import pandas as pd
import os

# === ConfiguraciÃ³n de la base de datos ===
DB_PATH = "ventas.csv"

def cargar_base():
    if os.path.exists(DB_PATH):
        return pd.read_csv(DB_PATH)
    else:
        return pd.DataFrame(columns=["codigo"])

def guardar_base(df):
    df.to_csv(DB_PATH, index=False)

# === Interfaz de usuario ===
st.set_page_config(page_title="Control de Ventas", page_icon="ğŸ§¾", layout="centered")
st.title("ğŸ§¾ VerificaciÃ³n de Venta de Producto")

codigo = st.text_input("ğŸ” Ingresa el cÃ³digo del cliente:")

if st.button("Verificar"):
    if not codigo:
        st.warning("âš ï¸ Por favor, ingresa un cÃ³digo vÃ¡lido.")
    else:
        base = cargar_base()
        if codigo in base["codigo"].values:
            st.error(f"âš ï¸ El cÃ³digo '{codigo}' ya tiene una venta registrada.")
        else:
            st.success(f"âœ… El cÃ³digo '{codigo}' NO tiene venta registrada.")
            if st.button("âœ… Confirmar venta"):
                base = base.append({"codigo": codigo}, ignore_index=True)
                guardar_base(base)
                st.success(f"âœ”ï¸ Venta registrada para el cÃ³digo '{codigo}'.")
